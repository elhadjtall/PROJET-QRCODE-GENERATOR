"use strict";
var __importDefault = (this && this.__importDefault) || function (mod) {
    return (mod && mod.__esModule) ? mod : { "default": mod };
};
Object.defineProperty(exports, "__esModule", { value: true });
exports.loadFont = loadFont;
const load_bitmap_font_js_1 = require("./load-bitmap-font.js");
const core_1 = require("@jimp/core");
const js_png_1 = __importDefault(require("@jimp/js-png"));
const path_1 = __importDefault(require("path"));
const CharacterJimp = (0, core_1.createJimp)({ formats: [js_png_1.default] });
/**
 * Loads a Bitmap Font from a file.
 * @param file A path or URL to a font file
 * @returns A collection of Jimp images that can be used to print text
 * @example
 * ```ts
 * import { Jimp, loadFont } from "jimp";
 * import { SANS_10_BLACK } from "jimp/fonts";
 *
 * const font = await loadFont(SANS_10_BLACK);
 * const image = new Jimp({ width: 200, height: 100, color: 0xffffffff });
 *
 * image.print(font, 10, 10, "Hello world!");
 * ```
 */
async function loadFont(file) {
    let fileOrBuffer = file;
    if (typeof window === "undefined") {
        const { existsSync, promises: fs } = await import("fs");
        if (existsSync(file)) {
            fileOrBuffer = await fs.readFile(file);
        }
    }
    const font = await (0, load_bitmap_font_js_1.loadBitmapFont)(fileOrBuffer);
    return {
        ...font,
        pages: await Promise.all(font.pages.map(async (page) => CharacterJimp.read(path_1.default.join(path_1.default.dirname(file), page)))),
    };
}
//# sourceMappingURL=load-font.js.map